# JavaScript

## 原型

每一个 JavaScript 对象（`null` 除外）都和另一个对象相关联。

## 继承

JS 是基于对象，没有类的概念。实现继承，用 JS 原型  `prototype` 机制或者用 `apply` 和 `call` 方法来实现。

JS对象具有“自有属性”，也有一些属性是从原型对象继承而来的。对象的原型属性构成了一个“链”，通过原型链可以实现属性的继承。

比如要查询对象 `obj` 的属性 `x` ，如果 `obj` 中不存在 `x` ，那么将会继承在 `obj` 中的原型对象中查找属性 `x` ，如果原型对象中也没有 `x` ，但这个原型对象也有原型，那么继续在这个原型对象的原型上执行查询，直到找到 `x` 或者找到一个原型是 `null` 的对象为止。

在 JS 中，只有在查询属性时才会体会到继承的存在，而设置属性则和继承无关。

## 闭包

闭包是指有权访问另一个函数作用域中的变量的函数，创建闭包的最常用的方式就是在一个函数内创建另一个函数，通过另一个函数访问这个函数的局部变量。

**特点**：函数嵌套函数；函数内部可以引用外部的参数和变量；参数和变量不会被垃圾回收机制回收。

**优点**：变量长期驻扎在内存中；避免全局变量的污染；私有成员的存在。

**缺点**：常驻内存，会增大内存使用量，使用不当会造成内存泄漏。

## 冒泡事件和捕获事件

冒泡事件：鼠标点击了一个按钮，同样的事件将会在这个元素的所有祖先元素中被触发。这个事件从元素开始一直冒泡到 DOM 树的最上层。

## 事件阶段

> * 捕获阶段：在事件对象到达事件目标之前，事件对象必须从 window 经过目标的祖先节点传播到事件目标。
> * 目标阶段：事件对象到达其事件目标。一旦事件对象到达事件目标，该阶段的事件监听器就要对它进行处理。
> * 冒泡阶段：从事件目标传播经过其祖先节点传播到 window。

## 事件代理

事件目标自身不处理事件，把处理任务委托给其父元素或者祖先元素，甚至根元素。因为绑定单击事件多导致脚本执行速度变慢，也占用大量内存。

优点：需要创建的以及驻留在内存中的事件处理器减少了；提高性能；降低浏览器崩溃的风险；无需绑定事件处理器。

## 原生ajax示例

```javascript
var request;
if(window.XMLHttpRequest) {
    request = new XMLHttpRequest();
}else {
    request = new ActiveXObject('Microsoft.XMLHTTP');// IE 5/6
}
request.onreadystatechange = function() {
    if(request.readyState == 4 && request.status == 200) {
        document.getElementById('div').innerHTML = request.responseText;
    }
};
request.open('GET', 'test.txt', true);
request.send();
```
